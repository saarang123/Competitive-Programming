Subtask ideas -
1) Small n. Bruteforce: check every edge subset
3) r_i <= 1. Super set of subtask 2.
4) Tree is a straight chain. 
5) One endpoint in conditions is root. This is also a super set of subtask 2.
6) Original constraints.
