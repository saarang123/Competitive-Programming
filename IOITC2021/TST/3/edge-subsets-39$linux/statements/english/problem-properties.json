{"scoring":null,"notes":"Subtask ideas -\n1) Small n. Bruteforce: check every edge subset\n3) r_i <= 1. Super set of subtask 2.\n4) Tree is a straight chain. \n5) One endpoint in conditions is root. This is also a super set of subtask 2.\n6) Original constraints.","legend":"Instead of updating statement here. Request for .tex file on telegram.\n\nYou are given a rooted tree with $n$ vertices. It is rooted at node $1$. Additionally there are $m$ tuples of the form $(u_i ,v_i ,l_i ,r_i)$. $u_i,v_i$ are vertices in the tree such that $u_i$ is an ancestor of $v_i$, and $l_i,r_i$ are integers.\n\nChoose a subset of the edges such that for every such tuple, the number of edges chosen on the path from $u_i$ to $v_i$ lies in the range $[l_i,r_i]$, or state that no such subset exists.","authorLogin":"vichitr","language":"english","timeLimit":1000,"output":"For each test case,\nIf there is no such subset then print $-1$ in a single line.\n\nIf there exists one such subset then\n\nIn the first line, print an integer $k$ --- the size of chosen edge subset. \n\nIn second line print $k$ space separated integers $v_1, v_2, v_3, \\ldots, v_k$ --- describing chosen edge subset. Here $v_i$ represents an edge from its parent node to itself $(p_{v_i}, v_i)$. \n\n","inputFile":"stdin","outputFile":"stdout","input":"First line contains an integer $T$ --- the number of test cases.\n\n$T$ test cases follow. For each test case,\n\nFirst line contains two space separated integers $n$ $(1 \\leq n \\leq 1000 )$ and $m$ $(0 \\leq m \\leq 1000)$ --- the number of vertices and number of tuples respectively.\n\nSecond line contains $n-1$ space separated integers $p_2, p_3, \\ldots, p_n$ --- $p_i$ is parent of $i$-th node.\n\nNext $m$ lines each containing four space separated integers $u_i, v_i, l_i, r_i$ $(1 \\leq u_i, v_i \\leq n, 0 \\leq l_i \\leq r_i \\leq n-1)$ --- representing $m$ tuples.\n\nIt is guaranteed that $u_i$ is an ancestor of $v_i$.\n\nIt is guaranteed that the sum of $n$ over all test cases does not exceed $100000$.\n\nIt is guaranteed that the sum of $m$ over all test cases does not exceed $100000$.\n","authorName":"Vichitr Gandas","sampleTests":[{"output":"-1\n0\n\n2\n2 3 \n","input":"3\n3 2\n3 1\n1 3 1 1\n1 3 2 2\n3 1\n3 1\n1 2 0 0\n3 1\n3 1\n1 3 1 2\n","inputFile":"example.01","outputFile":"example.01.a"}],"name":"Edge Subsets","interaction":null,"memoryLimit":268435456,"tutorial":""}
